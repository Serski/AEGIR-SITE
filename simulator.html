<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Outpost Aegir Simulator</title>
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <link rel="manifest" href="site.webmanifest">
  <meta name="theme-color" content="#000000" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="gin.css" />
</head>
<body>
  <div id="gin-ui" class="gin-page">
    <header id="gin-top-bar" class="gin-top-bar">
      <div class="gin-top-left">
        <button
          id="gin-menu-button"
          class="gin-menu-button"
          type="button"
          aria-expanded="false"
          aria-controls="gin-main-menu"
        >
          <span class="gin-menu-icon" aria-hidden="true">
            <span></span>
            <span></span>
            <span></span>
          </span>
          <span class="visually-hidden">Toggle navigation menu</span>
        </button>
        <a class="gin-logo-link" href="index.html">
          <img src="favicon/favicon.svg" alt="Outpost Aegir logo" class="gin-logo" />
          <span class="gin-wordmark" aria-label="Outpost Aegir wordmark">OUTPOST AEGIR</span>
        </a>
      </div>
      <div class="gin-top-center">
        <h1 class="gin-page-heading">Aegir Battle Simulator</h1>
      </div>
    </header>

    <nav id="gin-main-menu" class="gin-main-menu" aria-label="Site sections" hidden>
      <a class="gin-main-menu__link" href="index.html">Sector Map</a>
      <a class="gin-main-menu__link" href="lore.html">Lore</a>
      <a class="gin-main-menu__link" href="wiki.html">Wiki</a>
      <a class="gin-main-menu__link" href="interviews.html">NEXI NEWS</a>
      <a class="gin-main-menu__link" href="simulator.html" aria-current="page">Simulator</a>
    </nav>

    <main class="gin-page-main simulator-main">
      <section class="simulator-intro" aria-labelledby="simulator-overview">
        <p class="gin-section-header" id="simulator-overview">Training Uplink</p>
        <div class="simulator-intro__content">
          <h2>Aegir Battle Simulator</h2>
          <p>
            Configure opposing fleets, set tactical doctrine, and resolve a three-round engagement that mirrors the Outpost
            Aegir combat cadence. Each round walks through Detection &amp; Initiative, Engagement, and Resolution stages while
            tracking shields, morale, and special orders.
          </p>
        </div>
      </section>

      <section class="simulator-environment" aria-labelledby="simulator-environment-heading">
        <div class="simulator-environment__controls">
          <h3 id="simulator-environment-heading" class="status-slug" data-slug="theater">
            Theater Array: <span data-slug-value>Theater Locked</span>
          </h3>
          <label class="simulator-field simulator-field--cards">
            <span>Operational Layer</span>
            <select id="battle-theater" aria-describedby="theater-help" class="visually-hidden"></select>
            <div class="theater-card-grid" id="theater-card-grid" role="listbox" aria-labelledby="simulator-environment-heading"></div>
          </label>
          <p id="theater-help" class="simulator-help-text"></p>
        </div>
        <div class="simulator-environment__summary" aria-live="polite">
          <p class="theater-description"></p>
          <figure class="theater-visual">
            <img
              src="images/icons/Asteroid Belt.png"
              alt="Theater visual"
              id="theater-visual"
              data-theater-visual
            />
          </figure>
          <aside class="micro-sim" aria-label="Projected Vital Curves">
            <header>
              <p>Projected Vital Curves</p>
              <span class="micro-sim__legend">
                <span data-series="shields">Shields</span>
                <span data-series="hull">Hull</span>
                <span data-series="morale">Morale</span>
              </span>
            </header>
            <div class="micro-sim__sparklines" id="micro-sim-sparklines"></div>
          </aside>
        </div>
      </section>

      <div class="simulator-grid">
        <section class="fleet-panel" data-side="alpha" aria-labelledby="fleet-alpha-heading">
          <header class="fleet-panel__header">
            <div class="fleet-panel__heading">
              <h3 id="fleet-alpha-heading">
                <input
                  type="text"
                  value="Fleet Alpha"
                  aria-label="Fleet Alpha name"
                  data-fleet-name
                  data-default-name="Fleet Alpha"
                />
              </h3>
              <p class="fleet-panel__role">Attacker / Left Column</p>
            </div>
            <div class="fleet-panel__commander-chip" data-commander-chip>
              <div class="commander-chip__portrait" aria-hidden="true"></div>
              <div class="commander-chip__info">
                <p class="commander-chip__name">Unassigned</p>
                <p class="commander-chip__traits">No command signature detected.</p>
              </div>
            </div>
          </header>
          <div class="fleet-panel__body">
            <div class="fleet-field-group">
              <div class="commander-field">
                <label class="simulator-field commander-field__select">
                  <span>Commander</span>
                  <select data-field="commander"></select>
                </label>
                <div class="commander-field__portrait">
                  <img src="images/icons/Pilot.png" alt="Commander portrait" />
                </div>
              </div>
              <div class="doctrine-field-grid">
                <label class="simulator-field simulator-field--cards">
                  <span>Formation Doctrine</span>
                  <select data-field="formation" class="visually-hidden"></select>
                  <div class="doctrine-card-grid" data-doctrine="formation" role="listbox"></div>
                </label>
                <label class="simulator-field simulator-field--cards">
                  <span>Engagement Tactic</span>
                  <select data-field="tactic" class="visually-hidden"></select>
                  <div class="doctrine-card-grid" data-doctrine="tactic" role="listbox"></div>
                </label>
              </div>
            </div>

            <div class="fleet-flags">
              <div class="chip-toggle" data-toggle="withdraw-r1">
                <input type="checkbox" data-field="withdraw-r1" id="alpha-withdraw-r1" class="visually-hidden" />
                <label for="alpha-withdraw-r1">Withdraw after R1</label>
              </div>
              <div class="chip-toggle" data-toggle="withdraw-r2">
                <input type="checkbox" data-field="withdraw-r2" id="alpha-withdraw-r2" class="visually-hidden" />
                <label for="alpha-withdraw-r2">Withdraw after R2</label>
              </div>
              <div class="chip-toggle chip-toggle--volley" data-toggle="volley">
                <input type="checkbox" data-field="volley" id="alpha-volley" class="visually-hidden" />
                <label for="alpha-volley">Volley Coordination R1</label>
                <span class="chip-toggle__cooldown" aria-hidden="true">Cooldown: 1 round</span>
              </div>
            </div>

            <section class="fleet-classlist" aria-labelledby="fleet-alpha-roster">
              <h4 id="fleet-alpha-roster" class="status-slug" data-slug="alpha-roster">
                Roster Integrity: <span data-slug-value>Nominal</span>
              </h4>
              <div class="fleet-classlist__grid" data-counts></div>
            </section>

            <section class="fleet-orders" aria-labelledby="fleet-alpha-orders">
              <div class="fleet-orders__header">
                <h4 id="fleet-alpha-orders" class="status-slug" data-slug="alpha-orders">
                  Orders Matrix: <span data-slug-value>Standby</span>
                </h4>
                <button class="plan-orders-toggle" type="button" data-toggle-orders>
                  Plan Orders ▸
                </button>
              </div>
              <p class="simulator-help-text">
                Doctrine cards slot into each class per round. Hover synergy pips to read combined bonuses.
              </p>
              <div class="fleet-orders__container" data-orders></div>
            </section>
          </div>
          <footer class="fleet-panel__footer" data-status>
            <div class="morale-meter" data-morale>
              <span class="morale-meter__label">Morale</span>
              <div class="morale-meter__track" aria-hidden="true">
                <div class="morale-meter__value" data-morale-value></div>
              </div>
              <output class="morale-meter__score" role="status">50</output>
            </div>
          </footer>
        </section>

        <section class="fleet-panel" data-side="beta" aria-labelledby="fleet-beta-heading">
          <header class="fleet-panel__header">
            <div class="fleet-panel__heading">
              <h3 id="fleet-beta-heading">
                <input
                  type="text"
                  value="Fleet Beta"
                  aria-label="Fleet Beta name"
                  data-fleet-name
                  data-default-name="Fleet Beta"
                />
              </h3>
              <p class="fleet-panel__role">Defender / Right Column</p>
            </div>
            <div class="fleet-panel__commander-chip" data-commander-chip>
              <div class="commander-chip__portrait" aria-hidden="true"></div>
              <div class="commander-chip__info">
                <p class="commander-chip__name">Unassigned</p>
                <p class="commander-chip__traits">No command signature detected.</p>
              </div>
            </div>
          </header>
          <div class="fleet-panel__body">
            <div class="fleet-field-group">
              <div class="commander-field">
                <label class="simulator-field commander-field__select">
                  <span>Commander</span>
                  <select data-field="commander"></select>
                </label>
                <div class="commander-field__portrait">
                  <img src="images/icons/Pilot.png" alt="Commander portrait" />
                </div>
              </div>
              <div class="doctrine-field-grid">
                <label class="simulator-field simulator-field--cards">
                  <span>Formation Doctrine</span>
                  <select data-field="formation" class="visually-hidden"></select>
                  <div class="doctrine-card-grid" data-doctrine="formation" role="listbox"></div>
                </label>
                <label class="simulator-field simulator-field--cards">
                  <span>Engagement Tactic</span>
                  <select data-field="tactic" class="visually-hidden"></select>
                  <div class="doctrine-card-grid" data-doctrine="tactic" role="listbox"></div>
                </label>
              </div>
            </div>

            <div class="fleet-flags">
              <div class="chip-toggle" data-toggle="withdraw-r1">
                <input type="checkbox" data-field="withdraw-r1" id="beta-withdraw-r1" class="visually-hidden" />
                <label for="beta-withdraw-r1">Withdraw after R1</label>
              </div>
              <div class="chip-toggle" data-toggle="withdraw-r2">
                <input type="checkbox" data-field="withdraw-r2" id="beta-withdraw-r2" class="visually-hidden" />
                <label for="beta-withdraw-r2">Withdraw after R2</label>
              </div>
              <div class="chip-toggle chip-toggle--volley" data-toggle="volley">
                <input type="checkbox" data-field="volley" id="beta-volley" class="visually-hidden" />
                <label for="beta-volley">Volley Coordination R1</label>
                <span class="chip-toggle__cooldown" aria-hidden="true">Cooldown: 1 round</span>
              </div>
            </div>

            <section class="fleet-classlist" aria-labelledby="fleet-beta-roster">
              <h4 id="fleet-beta-roster" class="status-slug" data-slug="beta-roster">
                Roster Integrity: <span data-slug-value>Nominal</span>
              </h4>
              <div class="fleet-classlist__grid" data-counts></div>
            </section>

            <section class="fleet-orders" aria-labelledby="fleet-beta-orders">
              <div class="fleet-orders__header">
                <h4 id="fleet-beta-orders" class="status-slug" data-slug="beta-orders">
                  Orders Matrix: <span data-slug-value>Standby</span>
                </h4>
                <button class="plan-orders-toggle" type="button" data-toggle-orders>
                  Plan Orders ▸
                </button>
              </div>
              <p class="simulator-help-text">
                Doctrine cards slot into each class per round. Hover synergy pips to read combined bonuses.
              </p>
              <div class="fleet-orders__container" data-orders></div>
            </section>
          </div>
          <footer class="fleet-panel__footer" data-status>
            <div class="morale-meter" data-morale>
              <span class="morale-meter__label">Morale</span>
              <div class="morale-meter__track" aria-hidden="true">
                <div class="morale-meter__value" data-morale-value></div>
              </div>
              <output class="morale-meter__score" role="status">50</output>
            </div>
          </footer>
        </section>
      </div>

      <section class="simulator-run" aria-labelledby="simulator-run-heading">
        <h3 id="simulator-run-heading">Engagement Controls</h3>
        <div class="simulator-run__actions">
          <button id="simulate-button" class="gin-button">Run Three-Round Simulation</button>
          <button id="reset-button" class="gin-button gin-button--ghost">Reset Fleets</button>
        </div>
        <div class="simulator-run__share">
          <button id="share-seed" class="gin-button gin-button--ghost">Generate Share Code</button>
          <output id="share-seed-output" aria-live="polite"></output>
        </div>
      </section>

      <section class="simulator-results" aria-live="polite" aria-labelledby="simulator-results-heading">
        <h3 id="simulator-results-heading" class="status-slug" data-slug="results">
          Engagement Log: <span data-slug-value>Awaiting Simulation</span>
        </h3>
        <div class="simulator-results__content" id="simulator-results"></div>
      </section>
    </main>

    <footer class="gin-page-footer">
      Return to the <a href="index.html">Aegir sector map</a> to continue your survey.
    </footer>
  </div>
  <script src="menu.js"></script>
  <script src="simulator.js" type="module"></script>
</body>
</html>
